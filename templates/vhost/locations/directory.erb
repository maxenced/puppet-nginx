<% if defined? @www_root -%>
    root  <%= @www_root %>;
<% end -%>
<% if @try_files -%>
    try_files<% @try_files.each do |try| -%> <%= try %><% end -%>;
<% end -%>
<% if defined? @autoindex -%>
     autoindex <%= @autoindex %>;
<% end -%>
<% if @index_files.count > 0 -%>
    index <% Array(@index_files).each do |i| %> <%= i %><% end %>;
<% end -%>
<% @rewrite_rules.each do |rewrite_rule| -%>
    rewrite <%= rewrite_rule %>;
<% end -%>
<% if defined? @auth_basic -%>
    auth_basic           "<%= @auth_basic %>";
<% end -%>
<% if defined? @auth_basic_user_file -%>
    auth_basic_user_file <%= @auth_basic_user_file %>;
<% end -%>
<% if defined? @location_custom_cfg %>
<%- @location_custom_cfg.sort_by {|k,v| k}.each do |key,value| -%>
<%- if value.is_a?(Hash) -%>
<%- value.each do |subkey,subvalue| -%>
      <%- Array(subvalue).each do |asubvalue| -%>
  <%= key %> <%= subkey %> <%= asubvalue %>;
      <%- end -%>
    <%- end -%>
  <%- else -%>
  <%- Array(value).each do |asubvalue| -%>
  <%= key %> <%= asubvalue %>;
    <%- end -%>
  <%- end -%>
<%- end -%>
<%- end -%>
